# RouteClass

This `abstract` class, is the base for both HttpRoutes and SocketRoutes.

The structure of the routes folder determines the url required to access it.

```
+routes                   | not accessible by url
    /index.js             | http://example.com/
    +users                | not accessible by url
        /index.js         | http://example.com/users
        /create.js        | http://example.com/users/create
```

---

Property | Description
--- | ---
this.request | The [request object](https://nodejs.org/api/http.html#http_class_http_incomingmessage) generated by the http server
this.middlewares | An array of middlewares. These middlewares have to be set in the `setup( done )` method of the route and will be executed before the `hasAccess()` method. It's important to remember that the middlewares cannot send any data to the response object, because not all headers have been sent yet, unless the middleware stops execution by not calling the `done()` callback

---

Method | Description | Return
--- | --- | ---
constructor( config, request, connection ) | The route constructor | -

- The `request` parameter is a reference to the [request object](https://nodejs.org/api/http.html#http_class_http_incomingmessage) generated by the http server

---

Method | Description | Return
--- | --- | ---
setup( callback ) | Pre-execution processing function | -

This method will be called before the execute method. Once the `setup` function has run it's course the `callback` function needs to be called

---

Method | Description
--- | ---
hasAccess( resolve, reject ) |  Allows additional check before calling `execute( cb, ecb )` method

This method is called right before the execution of the route.
If the method calls the `reject()` callback function, the server will return a `403` status code.
If the method calls the `resolve()` callback function, the server will continue execution

---

Method | Description
--- | ---
methodAllowed( method ) |  Should return a boolean value

This method is called when the route has been determined.
If the method returns FALSE the server will return a `405` status code.
If the method returns TRUE the server will continue execution

- The `method` parameter can be `GET`, `POST`, `PUT`, `DELETE` or `SOCKET`

---

Method | Description
--- | ---
protocolAllowed( protocol ) |  Should return a boolean value

This method is called when the route has been determined and after the `methodAllowed()` method.
If the method returns FALSE the server will return a `403` status code.
If the method returns TRUE the server will continue execution

- The `protocol` parameter can be `http` or `https`

---

Method | Description
--- | ---
terminate() |  Called when the connection is terminated

---
